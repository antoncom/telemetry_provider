/**
This notice must be untouched at all times.
This is the COMPRESSED version of Draw2D
WebSite: http://www.draw2d.org
Copyright: 2006 Andreas Herz. All rights reserved.
Created: 5.11.2006 by Andreas Herz (Web: http://www.freegroup.de )
LICENSE: LGPL
**/

draw2d.TableFigure=function(){this.table=null;this.header=null;draw2d.Node.call(this);this.setResizeable(false);};draw2d.TableFigure.prototype=new draw2d.Node();draw2d.TableFigure.prototype.type="draw2d.TableFigure";draw2d.TableFigure.prototype.paint=function(){var _c9d=this.getModel();this.setPosition(_c9d.getPosition().x,_c9d.getPosition().y);this.header.innerHTML=_c9d.getName();this.setDimension(this.getWidth(),this.getHeight());var _c9e=this.model.getFieldModels();for(var i=0;i<_c9e.getSize();i++){this.addColumn(_c9e.get(i).getName(),_c9e.get(i).getExtendedDescriptionLabel());}};draw2d.TableFigure.prototype.propertyChange=function(_ca0){switch(_ca0.property){case draw2d.TableModel.EVENT_POSITION_CHANGED:this.setPosition(_ca0.newValue.x,_ca0.newValue.y);break;case draw2d.TableModel.EVENT_FIELD_ADDED:this.addColumn(_ca0.newValue.getName(),_ca0.newValue.getExtendedDescriptionLabel());break;case draw2d.TableModel.EVENT_KEY_ADDED:this.refreshConnections();break;case draw2d.TableModel.EVENT_NAME_CHANGED:this.header.innerHTML=model.getName();break;}};draw2d.TableFigure.prototype.createCommand=function(_ca1){if(_ca1.getPolicy()==draw2d.EditPolicy.MOVE){if(!this.canDrag){return null;}return new draw2d.CommandMoveTable(this.model);}return null;};draw2d.TableFigure.prototype.createHTMLElement=function(){var item=draw2d.Node.prototype.createHTMLElement.call(this);item.style.width="100px";item.style.height="100px";item.style.margin="0px";item.style.padding="0px";this.table=document.createElement("table");this.table.style.fontSize="8pt";this.table.style.margin="0px";this.table.style.padding="0px";this.table.cellPadding="0";this.table.cellSpacing="0";var row=this.table.insertRow(0);this.header=row.insertCell(0);this.header.innerHTML="";this.header.colSpan="2";this.header.style.background="transparent url(header.png) repeat-x";this.header.style.height="25px";this.header.style.paddingLeft="5px";this.header.style.paddingRight="5px";this.disableTextSelection(this.header);item.appendChild(this.table);return item;};draw2d.TableFigure.prototype.getWidth=function(){if(this.table===null){return 10;}if(window.getComputedStyle){return parseInt(getComputedStyle(this.table,"").getPropertyValue("width"));}return (this.table.clientWidth);};draw2d.TableFigure.prototype.getHeight=function(){if(this.table===null){return 10;}if(window.getComputedStyle){return parseInt(getComputedStyle(this.table,"").getPropertyValue("height"));}return (this.table.clientHeight);};draw2d.TableFigure.prototype.addColumn=function(name,_ca5){var x=this.table.insertRow(this.table.rows.length);var y=x.insertCell(0);y.innerHTML=_ca5;y.style.backgroundColor="gray";y.style.whiteSpace="nowrap";y.style.padding="2px";this.disableTextSelection(y);this.setDimension(this.getWidth(),this.getHeight());var port=new draw2d.InputFieldFigure();port.setWorkflow(this.workflow);port.setName("in_"+name);this.addPort(port,-5,y.offsetTop+y.clientHeight/2);port.paint();var port=new draw2d.OutputFieldFigure();port.setWorkflow(this.workflow);port.setName("out_"+name);this.addPort(port,y.offsetWidth+5,y.offsetTop+y.clientHeight/2);port.paint();};draw2d.TableFigure.prototype.getModelSourceConnections=function(){return this.getModel().getForeignKeyModels();};