/**
This notice must be untouched at all times.
This is the COMPRESSED version of Draw2D
WebSite: http://www.draw2d.org
Copyright: 2006 Andreas Herz. All rights reserved.
Created: 5.11.2006 by Andreas Herz (Web: http://www.freegroup.de )
LICENSE: LGPL
**/

draw2d.ServerPropertyPage=function(){draw2d.PropertyPage.call(this);this.html=document.createElement("div");this.html.style.width="100%";this.html.style.height="100%";this.header=this.createLabelElement(draw2d.I18N.PROPERTYPANEL_HEADER_SERVER,0,0);this.header.className="panel_header";this.html.appendChild(this.header);this.datarowLabel=this.createLabelElement(draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_NAME,10,45);this.html.appendChild(this.datarowLabel);this.nameText=document.createElement("input");this.nameText.type="text";var _3fc=this;if(editor.isReadonly()){this.nameText.disabled="true";}else{Event.observe(this.nameText,"keyup",function(e){var func=_3fc.currentModel.setName.bind(_3fc.currentModel);var _3ff=new draw2d.CommandChangeProperty(editor.getGraphicalViewer(),func,_3fc.currentModel.getName(),_3fc.nameText.value);editor.executeCommand(_3ff);});}this.nameText.style.position="absolute";this.nameText.style.width="210px";this.nameText.style.top="65px";this.nameText.style.left="10px";this.html.appendChild(this.nameText);this.cpuLabel=this.createLabelElement(draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_CPUUNITS,10,95);this.html.appendChild(this.cpuLabel);this.listboxCPU=document.createElement("select");this.listboxCPU.style.position="absolute";this.listboxCPU.style.overflow="auto";this.listboxCPU.style.width="60px";this.listboxCPU.style.top="115px";this.listboxCPU.style.left="10px";this.listboxCPU.size=1;this.listboxCPU["onchange"]=function(){var func=_3fc.currentModel.setCpuUnits.bind(_3fc.currentModel);var _401=new draw2d.CommandChangeProperty(editor.getGraphicalViewer(),func,_3fc.currentModel.getCpuUnits(),_3fc.listboxCPU.selectedIndex+1);editor.executeCommand(_401);};for(var i=1;i<8;i++){var node=document.createElement("option");node.value=""+i;node.appendChild(document.createTextNode(""+i));this.listboxCPU.appendChild(node);}this.html.appendChild(this.listboxCPU);this.ramLabel=this.createLabelElement(draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_RAM_MB,100,95);this.html.appendChild(this.ramLabel);this.ramText=document.createElement("input");this.ramText.type="text";var _404=function(_405){var ram=parseInt(_405.value,10);if(isNaN(ram)){ram=1024;}_405.value=""+ram;var func=this.currentModel.setRAM.bind(this.currentModel);var _408=new draw2d.CommandChangeProperty(editor.getGraphicalViewer(),func,this.currentModel.getRAM(),_405.value);editor.executeCommand(_408);};_404=_404.bind(this,this.ramText);Event.observe(this.ramText,"keyup",_404);this.ramText.style.position="absolute";this.ramText.style.width="110px";this.ramText.style.top="115px";this.ramText.style.left="100px";this.html.appendChild(this.ramText);this.imagesLabel=this.createLabelElement(draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGES,10,155);this.imagesLabel.className="property_panel_image_header";this.html.appendChild(this.imagesLabel);this.imagesAddLabel=this.createLabelElement(" ",120,155);this.imagesAddLabel.className="property_panel_image_add";this.imagesAddLabel.title=draw2d.I18N.TOOLTIP_BUTTON_ADD_IMAGE;this.html.appendChild(this.imagesAddLabel);Event.observe(this.imagesAddLabel,"click",function(){var _409=new draw2d.AddImageDialog("dialog_add_image",this.currentModel);_409.show();}.bind(this));this.imageContainer=document.createElement("div");this.imageContainer.style.position="absolute";this.imageContainer.style.top="175px";this.imageContainer.style.left="10px";this.imageContainer.style.width="240px";this.imageContainer.style.overflowX="hidden";this.imageContainer.style.overflowY="auto";this.imageContainer.className="property_panel_image_container";this.html.appendChild(this.imageContainer);};draw2d.ServerPropertyPage.prototype=new draw2d.PropertyPage();draw2d.ServerPropertyPage.prototype.type="draw2d.ServerPropertyPage";draw2d.ServerPropertyPage.prototype.init=function(_40a){this.currentModel=_40a;this.nameText.value=_40a.getName();this.ramText.value=_40a.getRAM();this.listboxCPU.selectedIndex=parseInt(_40a.getCpuUnits(),10)-1;this.imageContainer.innerHTML="";var _40b=new Element("table");_40b.style.position="absolute";_40b.style.top="0px";_40b.style.left="0px";_40b.style.width="220px";_40b.style.tableLayout="fixed";_40b.cellspacing="0";_40b.cellpadding="0";var _40c=_40a.getImagesModel().getImageModels();this.imageContainer.appendChild(_40b);for(var i=0;i<_40c.getSize();i++){var img=_40c.get(i);this.createNewImageHeader(_40b,img);cell=this.createNewImageCell(_40b,draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGE_BOOTORDER);var _40f=document.createElement("select");_40f.style.overflow="auto";_40f.style.width="60px";_40f.size=1;var _410=function(_411){var func=this.setBootOrder.bind(this);var _413=new draw2d.CommandChangeProperty(editor.getGraphicalViewer(),func,this.getBootOrder(),_411.selectedIndex+1);editor.executeCommand(_413);};for(var ii=1;ii<10;ii++){var node=document.createElement("option");node.value=""+ii;node.appendChild(document.createTextNode(""+ii));_40f.appendChild(node);}_40f.selectedIndex=img.getBootOrder()-1;cell.appendChild(_40f);_410=_410.bind(img,_40f);Event.observe(_40f,"change",_410);cell=this.createNewImageCell(_40b,draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGE_FILENAME);cell.innerHTML=img.getFileName();ellipsis(cell);cell=this.createNewImageCell(_40b,draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGE_TYPE);cell.innerHTML=img.getImageType();cell=this.createNewImageCell(_40b,draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGE_WRITEBACK);cell.innerHTML=img.getWriteback();cell=this.createNewImageCell(_40b,draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGE_READONLY);cell.innerHTML=img.getReadonly();cell=this.createSeparator(_40b);}};draw2d.ServerPropertyPage.prototype.onResize=function(w,h){this.imageContainer.style.height=Math.max(10,h-parseInt(this.imageContainer.style.top,10))+"px";};draw2d.ServerPropertyPage.prototype.createNewImageHeader=function(_418,_419){var row=_418.insertRow(_418.rows.length);var cell=row.insertCell(0);cell.style.width="70px";cell.innerHTML=_419.getName()+"   ";cell.className="property_panel_image_name";cell.setAttribute("colspan","2");var _41c=document.createElement("span");_41c.style.whiteSpace="nowrap";_41c.className="property_panel_image_remove";_41c.title=draw2d.I18N.TOOLTIP_BUTTON_REMOVE_IMAGE;_41c.innerHTML=" ";cell.appendChild(_41c);Event.observe(_41c,"click",function(_41d,_41e){var _41f=new draw2d.CommandRemoveImage(editor.getGraphicalViewer(),_41d,_41e);editor.getCommandStack().execute(_41f);}.bind(this,this.currentModel,_419));};draw2d.ServerPropertyPage.prototype.createNewImageCell=function(_420,_421){var row=_420.insertRow(_420.rows.length);var cell=row.insertCell(0);cell.innerHTML=_421;cell.className="property_panel_label";cell.style.width="70px";var cell=row.insertCell(1);cell.style.overflow="hidden";cell.style.width="130px";cell.className="property_panel_data";var _424=document.createElement("div");_424.style.whiteSpace="nowrap";_424.style.overflow="hidden";cell.appendChild(_424);return _424;};draw2d.ServerPropertyPage.prototype.createSeparator=function(_425){var row=_425.insertRow(_425.rows.length);var cell=row.insertCell(0);cell.innerHTML=" ";cell.className="property_panel_image_separator";cell.setAttribute("colspan","2");};draw2d.ServerPropertyPage.prototype.deinit=function(){};draw2d.ServerPropertyPage.prototype.getHTMLElement=function(){return this.html;};