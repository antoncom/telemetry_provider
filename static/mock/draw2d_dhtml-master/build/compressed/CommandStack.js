/**
This notice must be untouched at all times.
This is the COMPRESSED version of Draw2D
WebSite: http://www.draw2d.org
Copyright: 2006 Andreas Herz. All rights reserved.
Created: 5.11.2006 by Andreas Herz (Web: http://www.freegroup.de )
LICENSE: LGPL
**/

draw2d.CommandStack=function(){this.undostack=[];this.redostack=[];this.maxundo=50;this.eventListeners=new draw2d.ArrayList();};draw2d.CommandStack.PRE_EXECUTE=1;draw2d.CommandStack.PRE_REDO=2;draw2d.CommandStack.PRE_UNDO=4;draw2d.CommandStack.POST_EXECUTE=8;draw2d.CommandStack.POST_REDO=16;draw2d.CommandStack.POST_UNDO=32;draw2d.CommandStack.POST_MASK=draw2d.CommandStack.POST_EXECUTE|draw2d.CommandStack.POST_UNDO|draw2d.CommandStack.POST_REDO;draw2d.CommandStack.PRE_MASK=draw2d.CommandStack.PRE_EXECUTE|draw2d.CommandStack.PRE_UNDO|draw2d.CommandStack.PRE_REDO;draw2d.CommandStack.prototype.type="draw2d.CommandStack";draw2d.CommandStack.prototype.setUndoLimit=function(count){this.maxundo=count;};draw2d.CommandStack.prototype.markSaveLocation=function(){this.undostack=[];this.redostack=[];};draw2d.CommandStack.prototype.execute=function(_1570){if(_1570===null){return;}if(_1570.canExecute()==false){return;}this.notifyListeners(_1570,draw2d.CommandStack.PRE_EXECUTE);this.undostack.push(_1570);_1570.execute();this.redostack=[];if(this.undostack.length>this.maxundo){this.undostack=this.undostack.slice(this.undostack.length-this.maxundo);}this.notifyListeners(_1570,draw2d.CommandStack.POST_EXECUTE);};draw2d.CommandStack.prototype.undo=function(){var _1571=this.undostack.pop();if(_1571){this.notifyListeners(_1571,draw2d.CommandStack.PRE_UNDO);this.redostack.push(_1571);_1571.undo();this.notifyListeners(_1571,draw2d.CommandStack.POST_UNDO);}};draw2d.CommandStack.prototype.redo=function(){var _1572=this.redostack.pop();if(_1572){this.notifyListeners(_1572,draw2d.CommandStack.PRE_REDO);this.undostack.push(_1572);_1572.redo();this.notifyListeners(_1572,draw2d.CommandStack.POST_REDO);}};draw2d.CommandStack.prototype.getRedoLabel=function(){if(this.redostack.lenght===0){return "";}var _1573=this.redostack[this.redostack.length-1];if(_1573){return _1573.getLabel();}return "";};draw2d.CommandStack.prototype.getUndoLabel=function(){if(this.undostack.lenght===0){return "";}var _1574=this.undostack[this.undostack.length-1];if(_1574){return _1574.getLabel();}return "";};draw2d.CommandStack.prototype.canRedo=function(){return this.redostack.length>0;};draw2d.CommandStack.prototype.canUndo=function(){return this.undostack.length>0;};draw2d.CommandStack.prototype.addCommandStackEventListener=function(_1575){if(_1575 instanceof draw2d.CommandStackEventListener){this.eventListeners.add(_1575);}else{throw "Object doesn't implement required callback interface [draw2d.CommandStackListener]";}};draw2d.CommandStack.prototype.removeCommandStackEventListener=function(_1576){this.eventListeners.remove(_1576);};draw2d.CommandStack.prototype.notifyListeners=function(_1577,state){var event=new draw2d.CommandStackEvent(_1577,state);var size=this.eventListeners.getSize();for(var i=0;i<size;i++){this.eventListeners.get(i).stackChanged(event);}};