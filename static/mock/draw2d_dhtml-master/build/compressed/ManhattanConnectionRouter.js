/**
This notice must be untouched at all times.
This is the COMPRESSED version of Draw2D
WebSite: http://www.draw2d.org
Copyright: 2006 Andreas Herz. All rights reserved.
Created: 5.11.2006 by Andreas Herz (Web: http://www.freegroup.de )
LICENSE: LGPL
**/

draw2d.ManhattanConnectionRouter=function(){this.MINDIST=20;};draw2d.ManhattanConnectionRouter.prototype=new draw2d.ConnectionRouter();draw2d.ManhattanConnectionRouter.prototype.type="draw2d.ManhattanConnectionRouter";draw2d.ManhattanConnectionRouter.prototype.route=function(conn){var _39c=conn.getStartPoint();var _39d=this.getStartDirection(conn);var toPt=conn.getEndPoint();var _39f=this.getEndDirection(conn);this._route(conn,toPt,_39f,_39c,_39d);};draw2d.ManhattanConnectionRouter.prototype._route=function(conn,_3a1,_3a2,toPt,_3a4){var TOL=0.1;var _3a6=0.01;var UP=0;var _3a8=1;var DOWN=2;var LEFT=3;var _3ab=_3a1.x-toPt.x;var _3ac=_3a1.y-toPt.y;var _3ad;var dir;if(((_3ab*_3ab)<(_3a6))&&((_3ac*_3ac)<(_3a6))){conn.addPoint(new draw2d.Point(toPt.x,toPt.y));return;}if(_3a2==LEFT){if((_3ab>0)&&((_3ac*_3ac)<TOL)&&(_3a4===_3a8)){_3ad=toPt;dir=_3a4;}else{if(_3ab<0){_3ad=new draw2d.Point(_3a1.x-this.MINDIST,_3a1.y);}else{if(((_3ac>0)&&(_3a4===DOWN))||((_3ac<0)&&(_3a4==UP))){_3ad=new draw2d.Point(toPt.x,_3a1.y);}else{if(_3a2==_3a4){var pos=Math.min(_3a1.x,toPt.x)-this.MINDIST;_3ad=new draw2d.Point(pos,_3a1.y);}else{_3ad=new draw2d.Point(_3a1.x-(_3ab/2),_3a1.y);}}}if(_3ac>0){dir=UP;}else{dir=DOWN;}}}else{if(_3a2==_3a8){if((_3ab<0)&&((_3ac*_3ac)<TOL)&&(_3a4===LEFT)){_3ad=toPt;dir=_3a4;}else{if(_3ab>0){_3ad=new draw2d.Point(_3a1.x+this.MINDIST,_3a1.y);}else{if(((_3ac>0)&&(_3a4===DOWN))||((_3ac<0)&&(_3a4===UP))){_3ad=new draw2d.Point(toPt.x,_3a1.y);}else{if(_3a2==_3a4){var pos=Math.max(_3a1.x,toPt.x)+this.MINDIST;_3ad=new draw2d.Point(pos,_3a1.y);}else{_3ad=new draw2d.Point(_3a1.x-(_3ab/2),_3a1.y);}}}if(_3ac>0){dir=UP;}else{dir=DOWN;}}}else{if(_3a2==DOWN){if(((_3ab*_3ab)<TOL)&&(_3ac<0)&&(_3a4==UP)){_3ad=toPt;dir=_3a4;}else{if(_3ac>0){_3ad=new draw2d.Point(_3a1.x,_3a1.y+this.MINDIST);}else{if(((_3ab>0)&&(_3a4===_3a8))||((_3ab<0)&&(_3a4===LEFT))){_3ad=new draw2d.Point(_3a1.x,toPt.y);}else{if(_3a2===_3a4){var pos=Math.max(_3a1.y,toPt.y)+this.MINDIST;_3ad=new draw2d.Point(_3a1.x,pos);}else{_3ad=new draw2d.Point(_3a1.x,_3a1.y-(_3ac/2));}}}if(_3ab>0){dir=LEFT;}else{dir=_3a8;}}}else{if(_3a2==UP){if(((_3ab*_3ab)<TOL)&&(_3ac>0)&&(_3a4===DOWN)){_3ad=toPt;dir=_3a4;}else{if(_3ac<0){_3ad=new draw2d.Point(_3a1.x,_3a1.y-this.MINDIST);}else{if(((_3ab>0)&&(_3a4===_3a8))||((_3ab<0)&&(_3a4===LEFT))){_3ad=new draw2d.Point(_3a1.x,toPt.y);}else{if(_3a2===_3a4){var pos=Math.min(_3a1.y,toPt.y)-this.MINDIST;_3ad=new draw2d.Point(_3a1.x,pos);}else{_3ad=new draw2d.Point(_3a1.x,_3a1.y-(_3ac/2));}}}if(_3ab>0){dir=LEFT;}else{dir=_3a8;}}}}}}this._route(conn,_3ad,dir,toPt,_3a4);conn.addPoint(_3a1);};